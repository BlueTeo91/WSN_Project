###############################################################################
#                                                                             #
#                                                       15/Oct/2012  16:29:13 #
# IAR ANSI C/C++ Compiler V5.50.7.22081/W32 EVALUATION for ARM                #
# Copyright (C) 1999-2010 IAR Systems AB.                                     #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  C:\Documents and Settings\Administrator\My               #
#                    Documents\MyWirelessApp Demo Non Beacon                  #
#                    (Coordinator)\MyWirelessApp Demo Non Beacon              #
#                    (Coordinator)\PLM\Source\Common\Sys\NV_Data.c            #
#    Command line =  "C:\Documents and Settings\Administrator\My              #
#                    Documents\MyWirelessApp Demo Non Beacon                  #
#                    (Coordinator)\MyWirelessApp Demo Non Beacon              #
#                    (Coordinator)\PLM\Source\Common\Sys\NV_Data.c" -D        #
#                    gMacStandAlone_d=1 -D gSAPMessagesEnableLlc_d=0 -D       #
#                    gZtcIncluded_d=0 -D gTargetMC1322xNCB=1 --preprocess     #
#                    "C:\Documents and Settings\Administrator\My              #
#                    Documents\MyWirelessApp Demo Non Beacon                  #
#                    (Coordinator)\MyWirelessApp Demo Non Beacon              #
#                    (Coordinator)\Debug\List\" -lC "C:\Documents and         #
#                    Settings\Administrator\My Documents\MyWirelessApp Demo   #
#                    Non Beacon (Coordinator)\MyWirelessApp Demo Non Beacon   #
#                    (Coordinator)\Debug\List\" -lB "C:\Documents and         #
#                    Settings\Administrator\My Documents\MyWirelessApp Demo   #
#                    Non Beacon (Coordinator)\MyWirelessApp Demo Non Beacon   #
#                    (Coordinator)\Debug\List\" --diag_suppress               #
#                    Pe014,Pe001,Pe991,Pa039,Pe520 -o "C:\Documents and       #
#                    Settings\Administrator\My Documents\MyWirelessApp Demo   #
#                    Non Beacon (Coordinator)\MyWirelessApp Demo Non Beacon   #
#                    (Coordinator)\Debug\Obj\" --no_cse --no_unroll           #
#                    --no_inline --no_code_motion --no_tbaa --no_clustering   #
#                    --no_scheduling --debug --endian=little                  #
#                    --cpu=ARM7TDMI-S --fpu=None --dlib_config "C:\Program    #
#                    Files\IAR Systems\Embedded Workbench 5.4                 #
#                    Evaluation\arm\INC\DLib_Config_Normal.h" -I              #
#                    "C:\Documents and Settings\Administrator\My              #
#                    Documents\MyWirelessApp Demo Non Beacon                  #
#                    (Coordinator)\MyWirelessApp Demo Non Beacon              #
#                    (Coordinator)\MacPhy\Interface\" -I "C:\Documents and    #
#                    Settings\Administrator\My Documents\MyWirelessApp Demo   #
#                    Non Beacon (Coordinator)\MyWirelessApp Demo Non Beacon   #
#                    (Coordinator)\Application\Init\" -I "C:\Documents and    #
#                    Settings\Administrator\My Documents\MyWirelessApp Demo   #
#                    Non Beacon (Coordinator)\MyWirelessApp Demo Non Beacon   #
#                    (Coordinator)\Application\Interface\" -I "C:\Documents   #
#                    and Settings\Administrator\My Documents\MyWirelessApp    #
#                    Demo Non Beacon (Coordinator)\MyWirelessApp Demo Non     #
#                    Beacon (Coordinator)\Application\Configure\" -I          #
#                    "C:\Documents and Settings\Administrator\My              #
#                    Documents\MyWirelessApp Demo Non Beacon                  #
#                    (Coordinator)\MyWirelessApp Demo Non Beacon              #
#                    (Coordinator)\Application\UartUtil\" -I "C:\Documents    #
#                    and Settings\Administrator\My Documents\MyWirelessApp    #
#                    Demo Non Beacon (Coordinator)\MyWirelessApp Demo Non     #
#                    Beacon (Coordinator)\Application\Source\" -I             #
#                    "C:\Documents and Settings\Administrator\My              #
#                    Documents\MyWirelessApp Demo Non Beacon                  #
#                    (Coordinator)\MyWirelessApp Demo Non Beacon              #
#                    (Coordinator)\SSM\TS\Interface\" -I "C:\Documents and    #
#                    Settings\Administrator\My Documents\MyWirelessApp Demo   #
#                    Non Beacon (Coordinator)\MyWirelessApp Demo Non Beacon   #
#                    (Coordinator)\SSM\TS\Source\" -I "C:\Documents and       #
#                    Settings\Administrator\My Documents\MyWirelessApp Demo   #
#                    Non Beacon (Coordinator)\MyWirelessApp Demo Non Beacon   #
#                    (Coordinator)\SSM\ZTC\Interface\" -I "C:\Documents and   #
#                    Settings\Administrator\My Documents\MyWirelessApp Demo   #
#                    Non Beacon (Coordinator)\MyWirelessApp Demo Non Beacon   #
#                    (Coordinator)\SSM\ZTC\Source\" -I "C:\Documents and      #
#                    Settings\Administrator\My Documents\MyWirelessApp Demo   #
#                    Non Beacon (Coordinator)\MyWirelessApp Demo Non Beacon   #
#                    (Coordinator)\PLM\Interface\" -I "C:\Documents and       #
#                    Settings\Administrator\My Documents\MyWirelessApp Demo   #
#                    Non Beacon (Coordinator)\MyWirelessApp Demo Non Beacon   #
#                    (Coordinator)\PLM\LibInterface\" -I "C:\Documents and    #
#                    Settings\Administrator\My Documents\MyWirelessApp Demo   #
#                    Non Beacon (Coordinator)\MyWirelessApp Demo Non Beacon   #
#                    (Coordinator)\PLM\Source\Display\" -I "C:\Documents and  #
#                    Settings\Administrator\My Documents\MyWirelessApp Demo   #
#                    Non Beacon (Coordinator)\MyWirelessApp Demo Non Beacon   #
#                    (Coordinator)\PLM\Source\Keyboard\" -I "C:\Documents     #
#                    and Settings\Administrator\My Documents\MyWirelessApp    #
#                    Demo Non Beacon (Coordinator)\MyWirelessApp Demo Non     #
#                    Beacon (Coordinator)\PLM\Source\NVM\" -I "C:\Documents   #
#                    and Settings\Administrator\My Documents\MyWirelessApp    #
#                    Demo Non Beacon (Coordinator)\MyWirelessApp Demo Non     #
#                    Beacon (Coordinator)\PLM\Source\TMR\" -I "C:\Documents   #
#                    and Settings\Administrator\My Documents\MyWirelessApp    #
#                    Demo Non Beacon (Coordinator)\MyWirelessApp Demo Non     #
#                    Beacon (Coordinator)\PLM\Source\UART\" -I "C:\Program    #
#                    Files\IAR Systems\Embedded Workbench 5.4                 #
#                    Evaluation\arm\INC\" --interwork --cpu_mode thumb -On    #
#    List file    =  C:\Documents and Settings\Administrator\My               #
#                    Documents\MyWirelessApp Demo Non Beacon                  #
#                    (Coordinator)\MyWirelessApp Demo Non Beacon              #
#                    (Coordinator)\Debug\List\NV_Data.lst                     #
#    Object file  =  C:\Documents and Settings\Administrator\My               #
#                    Documents\MyWirelessApp Demo Non Beacon                  #
#                    (Coordinator)\MyWirelessApp Demo Non Beacon              #
#                    (Coordinator)\Debug\Obj\NV_Data.o                        #
#                                                                             #
#                                                                             #
###############################################################################

C:\Documents and Settings\Administrator\My Documents\MyWirelessApp Demo Non Beacon (Coordinator)\MyWirelessApp Demo Non Beacon (Coordinator)\PLM\Source\Common\Sys\NV_Data.c
      1          /*****************************************************************************
      2          * Data definitions for the application client of the NV storage module.
      3          *
      4          * c) Copyright 2007, Freescale, Inc. All rights reserved.
      5          *
      6          *
      7          * No part of this document must be reproduced in any form - including copied,
      8          * transcribed, printed or by any electronic means - without specific written
      9          * permission from Freescale Semiconductor.
     10          *
     11          *****************************************************************************/
     12          
     13          #include "EmbeddedTypes.h"
     14          #include "NVM_Interface.h"
     15          #include "NV_Data.h"
     16          
     17          #include "AppToPlatformConfig.h"
     18          #include "AppAspInterface.h"
     19          
     20          #ifndef gMacStandAlone_d
     21          #define gMacStandAlone_d  0
     22          #endif
     23          
     24          #ifndef gBeeStackIncluded_d
     25          #define gBeeStackIncluded_d  0
     26          #endif
     27          
     28          #ifndef ECNetIncluded_d
     29          #define ECNetIncluded_d  0
     30          #endif
     31          
     32          #ifndef SynkroIncluded_d
     33          #define SynkroIncluded_d 0
     34          #endif
     35          
     36          #ifndef gRF4CEIncluded_d
     37          #define gRF4CEIncluded_d  0
     38          #endif
     39          
     40          
     41          #if gBeeStackIncluded_d
     42          #include "BeeStackConfiguration.h"
     43          #include "BeeStack_Globals.h"
     44          //#include "BeeStackCalculations.h"
     45          #include "BeeStackParameters.h"
     46          /* IMPORTANT: See the comments at the beginning of NVM_Interface.h. */
     47          #include "ASL_UserInterface.h"
     48          #include "HaProfile.h"
     49          #endif
     50          
     51          #if ECNetIncluded_d
     52          #include "ECNet_Globals.h"
     53          #endif
     54          
     55          #if SynkroIncluded_d
     56          #include "NwkGlobals.h"
     57          #endif
     58          
     59          #if gRF4CEIncluded_d
     60          #include "NwkGlobals.h"
     61          #endif
     62          
     63          
     64          /*****************************************************************************
     65          ******************************************************************************
     66          * Private macros
     67          ******************************************************************************
     68          *****************************************************************************/
     69          #if gTargetMC1322xSRB
     70            #define gXtalCtuneVal_c     0x08 // values updated for kaibab 2.1
     71            #define gXtalFTuneVal_c     0x0F
     72          
     73          #elif gTargetMC1322xNCB
     74            #define gXtalCtuneVal_c     0x08 // values updated for kaibab 2.1
     75            #define gXtalFTuneVal_c     0x0F
     76           
     77          #elif gTargetMC1322xUSB
     78            #define gXtalCtuneVal_c     0x0A // values updated for kaibab 2.1
     79            #define gXtalFTuneVal_c     0x0E
     80          
     81          #elif gTargetMC1322xLPB
     82            #define gXtalCtuneVal_c     0x0B // values updated for kaibab 2.1
     83            #define gXtalFTuneVal_c     0x12
     84          
     85          #elif gTarget_UserDefined
     86            /* User defined tuning values */
     87            #define gXtalCtuneVal_c     gXtalCtuneValUserDefined_c
     88            #define gXtalFTuneVal_c     gXtalFTuneValUserDefined_c
     89          #else
     90            #error "Error: No valid target selected."
     91          #endif
     92          
     93          #define gSystemClock24MHzVal_c    TRUE
     94          #define gDigitalClock_PNVal_c     24
     95          #define gDigitalClock_RNVal_c     21
     96          #define gMACA_Clock_DIVVal_c      95
     97          #define gDigitalClock_RAFCVal_c   0
     98          #define gaRFSynVCODivIVal_c      \
     99            {\
    100               0x2f,\
    101               0x2f,\
    102               0x2f,\
    103               0x2f,\
    104               0x2f,\
    105               0x2f,\
    106               0x2f,\
    107               0x2f,\
    108               0x2f,\
    109               0x30,\
    110               0x30,\
    111               0x30,\
    112               0x30,\
    113               0x30,\
    114               0x30,\
    115               0x30\
    116            }
    117          
    118          #define gaRFSynVCODivFVal_c       \
    119            {\
    120              0x00355555,\
    121              0x006aaaaa,\
    122              0x00a00000,\
    123              0x00d55555,\
    124              0x010aaaaa,\
    125              0x01400000,\
    126              0x01755555,\
    127              0x01aaaaaa,\
    128              0x01e00000,\
    129              0x00155555,\
    130              0x004aaaaa,\
    131              0x00800000,\
    132              0x00b55555,\
    133              0x00eaaaaa,\
    134              0x01200000,\
    135              0x01555555\
    136            }
    137          /*****************************************************************************
    138          ******************************************************************************
    139          * Public memory declarations
    140          ******************************************************************************
    141          *****************************************************************************/
    142          #pragma location = "nv_data_init_struct"

   \                                 In section nv_data_init_struct, align 4
    143          const HardwareParameters_t gHardwareParameters = 
   \                     gHardwareParameters:
   \   00000000   44656C696D00       DC8 "Delim"
   \   00000006   18FFFFFFFFFF       DC8 24, 255, 255, 255, 255, 255, 255, 255, 255, 15, 0, 18, 18, 18, 18
   \              FFFFFF0F0012
   \              121212      
   \   00000015   121212121212       DC8 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 57, 0, 1, 8, 15, 24
   \              121212121212
   \              390001080F18
   \   00000027   15                 DC8 21
   \   00000028   5F00               DC16 95
   \   0000002A   00000000           DC32 0
   \   0000002E   2F2F2F2F2F2F       DC8 47, 47, 47, 47, 47, 47, 47, 47, 47, 48, 48, 48, 48, 48, 48, 48
   \              2F2F2F303030
   \              30303030    
   \   0000003E   55553500AAAA       DC32 3495253, 6990506, 10485760, 13981013, 17476266, 20971520, 24466773
   \              6A000000A000
   \              5555D500AAAA
   \              0A0100004001
   \              55557501    
   \   0000005A   AAAAAA010000       DC32 27962026, 31457280, 1398101, 4893354, 8388608, 11883861, 15379114
   \              E00155551500
   \              AAAA4A000000
   \              80005555B500
   \              AAAAEA00    
   \   00000076   000020015555       DC32 18874368, 22369621
   \              5501        
   \   0000007E   00                 DC8 0
   \   0000007F   44656C696D00       DC8 "Delim"
   \   00000085   000000             DC8 0, 0, 0
    144          {
    145           gaHardwareParametersDelimiterString_c, 
    146            
    147           SYSTEM_CLOCK/1000,                                   /* Bus_Frequency_In_MHz */
    148           
    149           {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF},    /* MAC_Address */
    150           
    151            gDefaultPowerLevel_c,                               /* Default Power Level */
    152           
    153           #if gTarget_UserDefined
    154            gDualPortRFOperation_c,                             /* dualPortRFOperation */
    155           #else
    156            FALSE,
    157           #endif
    158            
    159            gChannelPa_c,                                       /* paPowerLevelLimits */
    160            
    161            gCcaThreshold_c,                                    /* ccaThreshold */
    162            
    163           #if gTarget_UserDefined
    164            gEnableComplementaryPAOutput_c,                     /* enableComplementatyPAOutput */
    165           #else
    166            FALSE,
    167           #endif  
    168            
    169            gSystemClock24MHzVal_c,                             /* gSystemClock24MHz_c */
    170            gXtalCtuneVal_c,                                    /* gXtalCtuneVal_c */
    171            gXtalFTuneVal_c,                                    /* gXtalFTune_c */
    172            gDigitalClock_PNVal_c,                              /* gDigitalClock_PN_c */
    173            gDigitalClock_RNVal_c,                              /* gDigitalClock_RN_c */  
    174            gMACA_Clock_DIVVal_c,                               /* gMACA_Clock_DIV_c */
    175            gDigitalClock_RAFCVal_c,                            /* gDigitalClock_RAFC_c */
    176            gaRFSynVCODivIVal_c,                                /* gaRFSynVCODivI_c[16] */
    177            gaRFSynVCODivFVal_c,                                /* gaRFSynVCODivF_c[16] */
    178            #if gTarget_UserDefined
    179             gPowerLevelLock_c,                                 /* paPowerLevelLock */
    180            #else
    181             FALSE,
    182            #endif  
    183            gaHardwareParametersDelimiterString_c  
    184          };
    185          /*****************************************************************************
    186          ******************************************************************************
    187          * Public memory declarations
    188          ******************************************************************************
    189          *****************************************************************************/
    190          
    191          /* Define the NV storage data sets. Each table must end with "{NULL, 0}". */
    192          
    193          /* If the NV storage module's self test flag is on, the NV code will use */
    194          /* it's own internal data. */
    195          #if !gNvSelfTest_d
    196          #if gBeeStackIncluded_d
    197          /* This data set contains network layer variables to be preserved across resets */
    198          NvDataItemDescription_t const gaNvNwkDataSet[] = {
    199            {&gNwkData,				        sizeof(gNwkData)},
    200            {&gaNeighborTable,        sizeof(neighborTable_t) * gNwkInfobaseMaxNeighborTableEntry_c },
    201          #if ((gCoordinatorCapability_d || gRouterCapability_d ) && gRnplusCapability_d)
    202            {&gaRouteTable,           sizeof(routeTable_t) * gNwkInfobaseMaxRouteTableEntry_c },
    203          #endif
    204            {&gBeeStackConfig,        sizeof(beeStackConfigParams_t)},
    205            {NULL, 0}       /* Required end-of-table marker. */
    206          };
    207          #endif
    208          
    209          #if ECNetIncluded_d
    210          /* This data set contains network layer variables to be preserved across resets */
    211          NvDataItemDescription_t const gaNvNwkDataSet[] = {
    212            {(uint8_t*)&nodeData, sizeof(nodeData_t)},
    213            {(uint8_t*)&pollParams, 10},  
    214            {NULL, 0}       /* Required end-of-table marker. */
    215          };
    216          #endif
    217          
    218          #if SynkroIncluded_d
    219          /* This data set contains network layer variables to be preserved across resets */
    220          NvDataItemDescription_t const gaNvNwkDataSet[] = {
    221            {(uint8_t*)&nodeData, sizeof(nodeData_t)},
    222            {NULL, 0}       /* Required end-of-table marker. */
    223          };
    224          #endif
    225          
    226          #if gRF4CEIncluded_d
    227          /* This data set contains network layer variables to be preserved across resets */
    228          NvDataItemDescription_t const gaNvNwkDataSet[] = {
    229            {(uint8_t*)&nodeData, sizeof(nodeData_t)},
    230            {(uint8_t*)&gNwkNib,  sizeof(nwkNib_t)},
    231            {NULL, 0}       /* Required end-of-table marker. */
    232          };
    233          #endif
    234          
    235          #if gMacStandAlone_d
    236          /* This data set contains MAC layer variables to be preserved across resets */

   \                                 In section .rodata, align 4
    237          NvDataItemDescription_t const gaNvNwkDataSet[] = {
   \                     gaNvNwkDataSet:
   \   00000000   00000000           DC32 0H
   \   00000004   0000               DC16 0
   \   00000006   0000               DC8 0, 0
    238            {NULL, 0}       /* Required end-of-table marker. */
    239          };
    240          #endif
    241          
    242          /* different for each application */
    243          extern NvDataItemDescription_t const gaNvAppDataSet[];
    244          
    245          /* Table of data sets. Required by the NV storage module. */
    246          /* There must be gNvNumberOfDataSets_c entries in this table. If the */
    247          /* number of entries changes, gNvNumberOfDataSets_c must be changed. */

   \                                 In section .rodata, align 4
    248          NvDataSetDescription_t const NvDataSetTable[gNvNumberOfDataSets_c] = {
   \                     NvDataSetTable:
   \   00000000   12000000           DC8 18, 0, 0, 0
   \   00000004   ........           DC32 gaNvNwkDataSet
   \   00000008   20000000           DC8 32, 0, 0, 0
   \   0000000C   ........           DC32 gaNvAppDataSet
    249            {gNvDataSet_Nwk_ID_c, gaNvNwkDataSet},
    250            {gNvDataSet_App_ID_c, gaNvAppDataSet}
    251          };
    252          
    253          
    254          
    255          #endif                                  /* #if !gNvSelfTest_d */
    256          


   Section sizes:

     Function/Label      Bytes
     --------------      -----
     gHardwareParameters  136
     gaNvNwkDataSet         8
     NvDataSetTable        16

 
  24 bytes in section .rodata
 136 bytes in section nv_data_init_struct
 
 160 bytes of CONST memory

Errors: none
Warnings: none
